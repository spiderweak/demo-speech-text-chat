<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Capture for Whisper</title>

    <!-- Tailwind CSS -->
    <!--<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"> -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- JQuery Library -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>
        window.jQuery || document.write('<script src="/static/js/jquery-3.7.1.min.js"><\/script>');
    </script>

    <!-- Socket.IO Library -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<!--
    <script>
        // Loaded Socket IO || document.write('<script src="/static/js/socket.io-4.7.2.min.js"><\/script>');
    </script>
-->
</head>

<body class="bg-gray-100 h-screen flex flex-col items-center justify-center">
    <div id="chattingInterface" class="fixed top-0 left-0 w-full h-full">
        <div id="chatMessages" class="h-full overflow-y-auto bg-white p-4 shadow rounded-lg">
            <!-- Chat messages will be appended here -->
        </div>
        <div id="inputInterface" class="absolute bottom-0 w-full flex">
            <button id="recordButton" aria-label="Start Audio recording" class="bg-blue-500 text-white px-4 py-2 rounded-l-lg hover:bg-blue-700">
                üéôÔ∏è <!-- Microphone Emoji -->
            </button>

            <!-- Import File Button -->
            <button id="importButton" aria-label="Import file" class="bg-blue-300 text-white px-4 py-2 hover:bg-blue-400">
                üìé <!-- Paper Clip Emoji -->
            </button>
            <!-- Hidden File Input -->
            <input type="file" id="fileInput" class="hidden" />
            <!-- Hidden Accept/Deny buttons -->
            <div id="fileSelectionDetails" class="hidden p-2"></div>


            <textarea id="chatInput" placeholder="Type a message..." aria-label="Type your message here" class="flex-1 border border-gray-300 p-2 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
            
            <button id="changeAudioMode" arial-label="Change Audio Mode" class="bg-blue-300 text-white px-4 py-2 rounded-r-lg hover:bg-blue-400">Switch to Long Message Transcription</button>
            <button id="sendButton" aria-label="Send message" class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600">Send</button>
        </div>
    </div>

    <style>
        #chatInput {
            min-height: 50px; /* Minimum height */
            max-height: 300px; /* Maximum height */
            overflow-y: auto; /* Add a scrollbar if content exceeds max height */
            resize: none;
        }
    </style>

    <div id="loading-indicator" class="hidden my-5 flex justify-center items-center">
        <span class="loader"></span>
        <style>
            .loader {
                width: 30px;
                height: 30px;
                border: 5px solid #000;
                border-bottom-color: #FF3D00;
                border-radius: 50%;
                display: inline-block;
                box-sizing: border-box;
                animation: rotation 1s linear infinite;
            }
            @keyframes rotation {
                    0% {
                        transform: rotate(0deg);
                    }
                    100% {
                        transform: rotate(360deg);
                    }
                }
        </style>
    </div>

    <script src="{{ url_for('static', filename='js/audio_capture.js') }}"></script>

    <!--
        <script src="{{ url_for('static', filename='js/export.js') }}"></script>
    -->

</body>

</html>
